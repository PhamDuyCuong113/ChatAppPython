{% extends "chat/Base.html" %}
{% load static %}

{% block title %}ThÃ nh viÃªn nhÃ³m: {{ group.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">ğŸ‘¥ ThÃ nh viÃªn nhÃ³m <strong>{{ group.name }}</strong></h5>
      <div>
        <a href="{% url 'chat:group_chat' group.id %}" class="btn btn-sm btn-secondary">
          â¬… Quay láº¡i chat
        </a>
      </div>
    </div>

    <div class="card-body">
      {% if members %}
      <ul class="list-group">
        {% for member in members %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center gap-3">
            <img src="{% static 'images/user_image.jpg' %}" alt="avatar"
                 class="rounded-circle" width="42" height="42">
            <div>
              <strong>
                {{ member.name }}
                {% if member == group.owner %}
                  <span class="text-primary">(chá»§ nhÃ³m)</span>
                {% endif %}
              </strong><br>
              <small class="text-muted">@{{ member.username }}</small>
            </div>
          </div>

          <!-- âœ… Hiá»ƒn thá»‹ nÃºt xÃ³a chá»‰ náº¿u lÃ  chá»§ nhÃ³m -->
          {% if request.user == group.owner and member != group.owner %}
          <a href="{% url 'chat:remove_member' group.id member.username %}"
             class="btn btn-sm btn-outline-danger"
             onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a {{ member.name }} khá»i nhÃ³m khÃ´ng?')">
            âŒ XÃ³a
          </a>
          {% elif member == group.owner %}
          <span class="badge bg-primary">ğŸ‘‘ TrÆ°á»Ÿng nhÃ³m</span>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
      {% else %}
        <p class="text-muted text-center mt-3">KhÃ´ng cÃ³ thÃ nh viÃªn nÃ o trong nhÃ³m.</p>
      {% endif %}
    </div>

    <div class="card-footer d-flex justify-content-between">
      <a href="{% url 'chat:leave_group' group.id %}"
         class="btn btn-outline-danger"
         onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n rá»i khá»i nhÃ³m {{ group.name }} khÃ´ng?')">
        ğŸšª Rá»i nhÃ³m
      </a>

      {% if request.user == group.owner %}
      <a href="{% url 'chat:clear_group_chat' group.id %}"
         class="btn btn-outline-secondary"
         onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a toÃ n bá»™ Ä‘oáº¡n chat cá»§a nhÃ³m nÃ y khÃ´ng?')">
        ğŸ—‘ XÃ³a Ä‘oáº¡n chat nhÃ³m
      </a>
      {% endif %}
    </div>
  </div>
</div>

<style>
.card {
  border-radius: 12px;
  overflow: hidden;
}
.list-group-item {
  border: none;
  border-bottom: 1px solid #eee;
  transition: background 0.2s;
}
.list-group-item:hover {
  background: #f8f9fa;
}
</style>
{% endblock %}
